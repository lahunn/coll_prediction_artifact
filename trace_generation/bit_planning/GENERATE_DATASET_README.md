# é—®é¢˜é›†ç”Ÿæˆè„šæœ¬ä½¿ç”¨æŒ‡å—

## ğŸ“ æ¦‚è¿°

`generate_problem_dataset.py` ç”¨äºç”Ÿæˆæœºå™¨äººè·¯å¾„è§„åˆ’é—®é¢˜æ•°æ®é›†ã€‚æ¯ä¸ªé—®é¢˜åŒ…å«éšœç¢ç‰©ã€èµ·ç‚¹ã€ç»ˆç‚¹å’Œä½¿ç”¨ BIT* ç®—æ³•è§„åˆ’çš„è·¯å¾„ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è¶…å¿«é€Ÿæµ‹è¯• (æ¨èé¦–æ¬¡ä½¿ç”¨)

ç”Ÿæˆ3ä¸ªç®€å•é—®é¢˜ï¼ŒéªŒè¯åŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼š

```bash
chmod +x quick_test.sh
./quick_test.sh
```

**é¢„è®¡æ—¶é—´**: 1-5åˆ†é’Ÿ

---

### 2. å®Œæ•´åŠŸèƒ½æµ‹è¯•

è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ï¼Œç”Ÿæˆ15ä¸ªé—®é¢˜è¿›è¡ŒéªŒè¯ï¼š

```bash
chmod +x test_generate_dataset.sh
./test_generate_dataset.sh
```

**é¢„è®¡æ—¶é—´**: 5-15åˆ†é’Ÿ

**æµ‹è¯•å†…å®¹**:
- æµ‹è¯•1: ç”Ÿæˆ5ä¸ªç®€å•é—®é¢˜ (5ä¸ªéšœç¢ç‰©)
- æµ‹è¯•2: ç”Ÿæˆ10ä¸ªä¸­ç­‰éš¾åº¦é—®é¢˜ (10ä¸ªéšœç¢ç‰©)
- æ•°æ®é›†éªŒè¯

---

### 3. ç”Ÿæˆæ ‡å‡†æ•°æ®é›†

ç”Ÿæˆ3000ä¸ªé—®é¢˜çš„å®Œæ•´æ•°æ®é›†ï¼š

```bash
chmod +x generate_standard_dataset.sh
./generate_standard_dataset.sh
```

**é¢„è®¡æ—¶é—´**: æ•°å°æ—¶åˆ°æ•°å¤©ï¼ˆå–å†³äºç¡¬ä»¶ï¼‰

---

## ğŸ“‹ æ‰‹åŠ¨è¿è¡Œç¤ºä¾‹

### åŸºæœ¬ç”¨æ³•

```bash
# ç”Ÿæˆé»˜è®¤é…ç½® (3000ä¸ªé—®é¢˜, 10ä¸ªéšœç¢ç‰©)
python generate_problem_dataset.py
```

### è‡ªå®šä¹‰å‚æ•°

```bash
# ç”Ÿæˆ100ä¸ªé—®é¢˜ï¼Œæ¯ä¸ªæœ‰15ä¸ªéšœç¢ç‰©
python generate_problem_dataset.py \
    --num-problems 100 \
    --num-obstacles 15 \
    --max-time 60.0
```

### å®Œæ•´å‚æ•°ç¤ºä¾‹

```bash
python generate_problem_dataset.py \
    --robot-file kuka_iiwa/model_0.urdf \
    --num-problems 1000 \
    --num-obstacles 12 \
    --max-time 60.0 \
    --workspace-min -0.8 \
    --workspace-max 0.8 \
    --voxel-size-min 0.05 \
    --voxel-size-max 0.12 \
    --output-file maze_files/custom_dataset.pkl
```

---

## âš™ï¸ å‚æ•°è¯´æ˜

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--robot-file` | `kuka_iiwa/model_0.urdf` | æœºå™¨äººURDFæ–‡ä»¶è·¯å¾„ |
| `--num-problems` | `3000` | è¦ç”Ÿæˆçš„é—®é¢˜æ•°é‡ |
| `--num-obstacles` | `10` | æ¯ä¸ªé—®é¢˜çš„éšœç¢ç‰©æ•°é‡ |
| `--max-time` | `60.0` | æ¯ä¸ªé—®é¢˜çš„æœ€å¤§è§„åˆ’æ—¶é—´(ç§’) |
| `--workspace-min` | `-0.8` | å·¥ä½œç©ºé—´æœ€å°åæ ‡(ç±³) |
| `--workspace-max` | `0.8` | å·¥ä½œç©ºé—´æœ€å¤§åæ ‡(ç±³) |
| `--voxel-size-min` | `0.05` | ä½“ç´ æœ€å°å°ºå¯¸(ç±³) |
| `--voxel-size-max` | `0.12` | ä½“ç´ æœ€å¤§å°ºå¯¸(ç±³) |
| `--output-file` | è‡ªåŠ¨ç”Ÿæˆ | è¾“å‡ºæ–‡ä»¶è·¯å¾„ |

---

## ğŸ“Š è¾“å‡ºæ ¼å¼

ç”Ÿæˆçš„ `.pkl` æ–‡ä»¶åŒ…å«ä¸€ä¸ªé—®é¢˜åˆ—è¡¨ï¼š

```python
problems = [
    (obstacles_0, start_0, goal_0, path_0),
    (obstacles_1, start_1, goal_1, path_1),
    ...
]

# æ¯ä¸ªé—®é¢˜çš„ç»“æ„:
obstacles: List[Tuple[halfExtents, basePosition]]  # éšœç¢ç‰©ä½“ç´ åˆ—è¡¨
start: np.ndarray                                   # èµ·å§‹é…ç½® [q1, q2, ..., qn]
goal: np.ndarray                                    # ç›®æ ‡é…ç½® [q1, q2, ..., qn]
path: List[np.ndarray]                             # è·¯å¾„é…ç½®åºåˆ—
```

### è¯»å–æ•°æ®é›†ç¤ºä¾‹

```python
import pickle

with open('maze_files/kukas_7_3000.pkl', 'rb') as f:
    problems = pickle.load(f)

# è®¿é—®ç¬¬ä¸€ä¸ªé—®é¢˜
obstacles, start, goal, path = problems[0]

print(f"éšœç¢ç‰©æ•°é‡: {len(obstacles)}")
print(f"èµ·ç‚¹: {start}")
print(f"ç»ˆç‚¹: {goal}")
print(f"è·¯å¾„é•¿åº¦: {len(path)}")
```

---

## ğŸ”§ æ€§èƒ½è°ƒä¼˜

### å¿«é€Ÿç”Ÿæˆï¼ˆæµ‹è¯•ç”¨ï¼‰

```bash
python generate_problem_dataset.py \
    --num-problems 10 \
    --num-obstacles 5 \
    --max-time 30.0
```

### æ ‡å‡†é…ç½®ï¼ˆå¹³è¡¡ï¼‰

```bash
python generate_problem_dataset.py \
    --num-problems 1000 \
    --num-obstacles 10 \
    --max-time 60.0
```

### é«˜éš¾åº¦é…ç½®ï¼ˆç ”ç©¶ç”¨ï¼‰

```bash
python generate_problem_dataset.py \
    --num-problems 500 \
    --num-obstacles 20 \
    --max-time 120.0
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ—¶é—´ä¼°ç®—**
   - æ¯ä¸ªé—®é¢˜å¯èƒ½éœ€è¦å‡ ç§’åˆ°å‡ åˆ†é’Ÿ
   - 3000ä¸ªé—®é¢˜å¯èƒ½éœ€è¦æ•°å°æ—¶åˆ°æ•°å¤©
   - å»ºè®®å…ˆç”¨å°æ•°æ®é›†æµ‹è¯•

2. **å­˜å‚¨ç©ºé—´**
   - 3000ä¸ªé—®é¢˜çº¦ 10-50 MB
   - ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´

3. **è§„åˆ’å¤±è´¥**
   - å¦‚æœè§„åˆ’é¢‘ç¹å¤±è´¥ï¼Œè€ƒè™‘ï¼š
     - å‡å°‘éšœç¢ç‰©æ•°é‡
     - å¢åŠ å·¥ä½œç©ºé—´èŒƒå›´
     - å¢åŠ è§„åˆ’è¶…æ—¶æ—¶é—´

4. **å¹¶è¡Œç”Ÿæˆ**
   - å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªè„šæœ¬ç”Ÿæˆä¸åŒæ•°æ®é›†
   - æ³¨æ„æŒ‡å®šä¸åŒçš„è¾“å‡ºæ–‡ä»¶å

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1: ImportError

```
è§£å†³æ–¹æ¡ˆ: ç¡®ä¿åœ¨ bit_planning ç›®å½•ä¸‹è¿è¡Œ
cd /path/to/trace_generation/bit_planning
python generate_problem_dataset.py
```

### é—®é¢˜2: è§„åˆ’å¤±è´¥ç‡é«˜

```
è§£å†³æ–¹æ¡ˆ: å‡å°‘éšœç¢ç‰©æˆ–å¢åŠ è¶…æ—¶
python generate_problem_dataset.py \
    --num-obstacles 8 \
    --max-time 90.0
```

### é—®é¢˜3: å†…å­˜ä¸è¶³

```
è§£å†³æ–¹æ¡ˆ: åˆ†æ‰¹ç”Ÿæˆ
python generate_problem_dataset.py --num-problems 500 --output-file part1.pkl
python generate_problem_dataset.py --num-problems 500 --output-file part2.pkl
```

---

## ğŸ“ˆ ç¤ºä¾‹è¾“å‡º

```
======================================================================
æœºå™¨äººè·¯å¾„è§„åˆ’é—®é¢˜æ•°æ®é›†ç”Ÿæˆå™¨
======================================================================
æœºå™¨äººæ–‡ä»¶: kuka_iiwa/model_0.urdf
ç›®æ ‡é—®é¢˜æ•°: 10
éšœç¢ç‰©æ•°é‡: 10
å·¥ä½œç©ºé—´èŒƒå›´: (-0.8, 0.8)
ä½“ç´ å°ºå¯¸èŒƒå›´: (0.05, 0.12)
æœ€å¤§è§„åˆ’æ—¶é—´: 60.0ç§’
======================================================================
æœºå™¨äººè‡ªç”±åº¦: 7
è¾“å‡ºæ–‡ä»¶: maze_files/model_0_7_10.pkl
======================================================================

ç”Ÿæˆé—®é¢˜: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 10/10 [05:23<00:00, 32.35s/é—®é¢˜]

æ­£åœ¨ä¿å­˜ 10 ä¸ªé—®é¢˜åˆ° maze_files/model_0_7_10.pkl...
======================================================================
âœ“ æ•°æ®é›†ç”Ÿæˆå®Œæˆ!
âœ“ æˆåŠŸç”Ÿæˆ 10 ä¸ªé—®é¢˜
âœ“ å·²ä¿å­˜åˆ°: maze_files/model_0_7_10.pkl
======================================================================

è·¯å¾„é•¿åº¦ç»Ÿè®¡:
  å¹³å‡: 15.30
  æœ€å°: 8
  æœ€å¤§: 25
  ä¸­ä½æ•°: 14.50
```

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `generate_problem_dataset.py` - ä¸»ç”Ÿæˆè„šæœ¬
- `quick_test.sh` - å¿«é€Ÿæµ‹è¯• (3ä¸ªé—®é¢˜)
- `test_generate_dataset.sh` - å®Œæ•´æµ‹è¯•å¥—ä»¶ (15ä¸ªé—®é¢˜)
- `generate_standard_dataset.sh` - ç”Ÿæˆæ ‡å‡†æ•°æ®é›† (3000ä¸ªé—®é¢˜)
- `DATASET_GENERATION.md` - è¯¦ç»†æ–‡æ¡£

---

## ğŸ¯ æ¨èå·¥ä½œæµç¨‹

1. **é¦–æ¬¡ä½¿ç”¨**: è¿è¡Œ `quick_test.sh` éªŒè¯åŠŸèƒ½
2. **æµ‹è¯•è°ƒæ•´**: è¿è¡Œ `test_generate_dataset.sh` æµ‹è¯•ä¸åŒå‚æ•°
3. **å°è§„æ¨¡ç”Ÿæˆ**: ç”Ÿæˆ100-500ä¸ªé—®é¢˜è¿›è¡Œåˆæ­¥å®éªŒ
4. **å¤§è§„æ¨¡ç”Ÿæˆ**: ç”Ÿæˆå®Œæ•´çš„3000ä¸ªé—®é¢˜æ•°æ®é›†
